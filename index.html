<!doctype html>
<html lang="zh-tw">

	<head>
		<meta charset="utf-8">

		<title>Social Network Analysis Using R</title>

		<meta name="description" content="Machine Learning Using R">
		<meta name="author" content="David Chiu">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/Solarized.css" id="theme">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]}
  });
</script>

<script type="text/x-mathjax-config;executed=true">
  MathJax.Hub.Config({
    tex2jax: { inlineMath: [['$','$'],['\\(','\\)']] }
  });
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					
					<h2>Social Network ANnalysis With R</h2>
					
					<p>
						<small><a href="/">David Chiu       </a>   @ 中興大學</small>
							
						
					</p>
					<img style="background:None;margin:-30px 0px 0px 0px;border:None;box-shadow:None;width:200px" src="img/logo2.png">
				</section>

				
				<section>
				<h2>About Me</h2>
					<div><br></div>
					<!--img style="float: left; height: 499px;" src="https://s3.amazonaws.com/hakim-static/reveal-js/cornify.gif"-->
					<img style="float: left; height: 499px;" src="img/author.jpg">
					<br><div style="text-align: right;">
						<ul>
							<li>Co-founder of <a href="http://numerinfo.com/">NumerInfo</a></li>
							<li>Trend Micro Engineer</li>	
							<li><a href="http://ywchiu-tw.appspot.com/">ywchiu-tw.appspot.com</a></li>
												
						</ul>
					</div>
				</section>
				
				<section>
					<h2>Agenda</h2>
					<ul>
						<li>What is Social Network?</li>
						<li>Why Analyze Social Network?</li>
 						<li>How to Analyze						
							<ul>
								<li>Social Network Connection (Oauth, Oauth2)</li>
								<li>Social Network Analysis (Network Graph)</li>
								<li>Social Network Graph</li>
							</ul>	
						</li>
						<li>Conclusion</li>
					</ul>
				
				</section>

				<section>
					<h2>Social Network</h2>
					<p>
						<img src="img/social-networking.png" style="background:None;margin:-30px 0px 0px 0px;border:None;box-shadow:None;" width="600px;">
					</p>
					<p>			
						<small>http://libeltyseo.com/wp-content/uploads/2013/03/social-networking.png</small>
					</p>					
				</section>


				<section>
					<h2>Human Nature</h2>
					<p>
						<img src="img/peeping-tom.gif" width="400px;">
					</p>
					<p>			
						<small>http://cdn.macado.com/assets/2010/03/peeping-tom.gif</small>
					</p>					
				</section>
				
				<section>
					<h2>What do we want to know?</h2>
					<ul>
						<li>Who knows whom, and which people are common to their social networks?</li>
						<li>How frequently are particular people communicating with one another?</li>
						<li>Which social network connections generate the most value for a particular niche?</li>
						<li>How does geography affect your social connections in an online world?</li>
						<li>Who are the most influential/popular people in a social network?</li>
						<li>What are people chatting about (and is it valuable)?</li>
						<li>What are people interested in based upon the human language that they use in a digital world?</li>

					</ul>
				
				</section>
			<section>	
				<section>
					<h2>Lesson 1: Connect to Social Network</h2>
					<ul>
						<li>OAuth Flow</li>
						<li>Oauth v.s. OAuth2</li>
						<li>OpenID</li>
					</ul>
				
				</section>
				<section>
					<h2>OAuth Flow</h2>
					<p>
						<img src="img/oauth.png" style="background:None;margin:-30px 0px 0px 0px;border:None;box-shadow:None;" width="600px;">
					</p>
				
				</section>	
				<section>
					<h2>Difference Between OAuth and OAuth2</h2>
					<ul>
						<li>More OAuth Flows to allow better support for non-browser based applications</li>
						<li>OAuth 2.0 no longer requires client applications to have cryptography</li>
						<li>OAuth 2.0 signatures are much less complicated</li>
						<li>OAuth 2.0 Access tokens are "short-lived"</li>
						<li>OAuth 2.0 is meant to have a clean separation of roles between the server responsible for handling OAuth requests and the server handling user authorization</li>
					</ul>
				
				</section>
				<section>
					<h2>OpenID</h2>
					<p>
						<img src="img/openid.png" style="background:None;margin:-30px 0px 0px 0px;border:None;box-shadow:None;" width="600px;">
					</p>
				
				</section>
			</section>
			<section>							
				<section>
					<h2>Connect to Facebook</h2>
					<p>
						<img src="img/fb.png" width="800px;">
					</p>
					<p>			
						<small>https://developers.facebook.com/</small>
					</p>	
				</section>

				<section>
					<h2>Get Access Token</h2>
					<p>
						<img src="img/accesstoken.png" width="800px;">
					</p>
					<p>			
						<small>https://developers.facebook.com/tools/explorer/</small>
					</p>	
				</section>
				<section>
					<h2>User Permission</h2>
					<p>
						<img src="img/userpermission.png" width="800px;">
					</p>	
				</section>
				<section>
					<h2>Permission List</h2>
					<ul>
						<li>User Data Permissions: 
						<ul>
						<li>user_hometown</li>
						<li>user_location</li>
						<li>user_interests</li>
						<li>user_likes</li>
						<li>user_relationships</li>
						</ul></li>
						<li>Friends Data Permissions: 
							<ul>
							<li>friends_hometown</li>
							<li>friends_location</li>
							<li>friends_interests</li>
							<li>friends_likes</li>
							<li>friends_relationships</li>
							</ul></li>
						<li>Extended Permissions: <ul><li>read_friendlists</li></ul></li>
					</ul>	
				</section>
				<section>
					<h2>Copy Token</h2>
					<p>
						<img src="img/copytoken.png" width="800px;">
					</p>	
				</section>				
			</section>

				<section>
					<h2>Required Packages</h2>
					<ul>
						<li>RCurl
							<ul>
								<li>General network (HTTP/FTP/...) client interface for R</li>
							</ul>
						</li>
						<li>rjson
							<ul>
								<li>JSON for R</li>
							</ul>
						</li>
						<li>XML
							<ul>
								<li>Tools for parsing and generating XML within R and S-Plus</li>
							</ul>
						</li>
						<li>igraph
							<ul>
								<li>Network analysis and visualization</li>
							</ul>
						</li>
						<li>bitops
							<ul>
								<li>Bitwise Operations</li>
							</ul>
						</li>						
						
					</ul>	
				</section>

				
				<section data-markdown>
					<script type="text/template">
						## Required Package
							install.packages(c('rjson','RCurl','XML','igraph','bitops'),dependencies=TRUE)
							library(rjson)
							library(RCurl)
							library(XML)
							library(igraph)
							library(bitops)
					</script>
				</section>	

				
				<section data-markdown>
					<script type="text/template">
						## Facebook Connect
							fb_connect <-  function( path = "me", access_token = token, options){
							  if( !missing(options) ){
								options <- sprintf( "?%s", paste( names(options), "=", unlist(options), collapse = "&", sep = "" ) )
								options <- gsub(",", "%2C", options)
								url <- sprintf( "https://graph.facebook.com/%s%s&access_token=%s", path, options, access_token )
							  } else {
								url <- sprintf( "https://graph.facebook.com/%s?access_token=%s", path, access_token )
							  }
							  data <- getURL( url, ssl.verifypeer = FALSE  )
							  fromJSON( data )
							}
					</script>
				</section>
				

				<section>
					<h2>Test On API Explorer</h2>
					<p>
						<img src="img/explorer1.png" width="800px;">
					</p>	
				</section>	
				
				<section data-markdown>
					<script type="text/template">
						## Executed Result
							> fb_connect("me",access_token)
							$id
							[1] "778224889"

							$name
							[1] "David Chiu"

							$first_name
							[1] "David"

							$last_name
							[1] "Chiu"

							$link
							[1] "https://www.facebook.com/ChiuYW"

							$username
							[1] "ChiuYW"
					</script>
				</section>	

				<section data-markdown>
					<script type="text/template">
						## Get Friend List
							> friends <- fb_connect(path="me/friends", access_token=access_token)
							> friends
					</script>
				</section>	

				<section data-markdown>
					<script type="text/template">
						## Get Friend Group List
							friendlists <- fb_connect( path="me/friendlists", access_token=access_token)
							friendlists.id <- sapply(friendlists$data, function(x) x$id)
							friendlists.name <- sapply(friendlists$data, function(x) x$name)
					</script>
				</section>	
				
				<section data-markdown>
					<script type="text/template">
						## Facebook Element Extractor
							myself <- fb_connect(path="me", access_token=access_token, options=list("fields"="id,name,location,hometown,gender,friends.fields(location,hometown,name,gender)"))
							myname <- myself$name

							friends <- myself$friends
							
							# extract Facebook IDs
							friends.id <- sapply(friends$data, function(x) x$id)
							
							# extract names 
							friends.name <- unlist(sapply(friends$data, function(x)  iconv(x$name,to='UTF8',sub="")))
							friends.gender <- sapply(friends$data, function(x) unlist(x$gender))
							friends.location.id <- unlist(sapply(friends$data, function(x) x$location$id))
							friends.location.name <- unlist(sapply(friends$data, function(x) {if (is.null(x$location$id)) "none" else iconv(x$location$name,to='UTF8',sub="")}))

							friends.hometown.name <- unlist(sapply(friends$data, function(x) {if (is.null(x$hometown$id)) "none" else iconv(x$hometown$name,to='UTF8',sub="")}))


					</script>
				</section>	
				<section data-markdown>
					<script type="text/template">
						## Get Friendship
							friendships <- function() {
							  print("Generating friendship matrix")
							  N <- length(friends.id)
							  friendship.matrix <- matrix(0,N,N)
							  for (i in 1:N) {
								print(paste(i,friends.name[i]))
								tmp <- facebook( path=paste("me/mutualfriends", friends.id[i], sep="/") , access_token=access_token)
								mutualfriends <- sapply(tmp$data, function(x) x$id)
								friendship.matrix[i,friends.id %in% mutualfriends] <- 1
							  }
							  
							  # Create a vector of 1's for my connections with my friends
							  myfriends <- c(1:N)
							  myfriends[] <-1
							  
							  # Add this vector as a column to the friendship matrix
							  friendship.matrix <- cbind(friendship.matrix,myfriends)
							  
							  # Append my friendship with myself (0 in this case), and add it as a row
							  friendship.matrix <- rbind(friendship.matrix,append(myfriends,0))
							  
							  print(paste("Added",myname))
							  
							  rownames(friendship.matrix) <- append(friends.name,myname)
							  colnames(friendship.matrix) <- append(friends.name,myname)
							  
							  return (friendship.matrix)
							}
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## Friend Graph
							friendgraph <- function(friendship.matrix) {
							  friendship.graph <- graph.adjacency(friendship.matrix, mode=c("undirected"), weighted=NULL)
							  
							  V(friendship.graph)$gender <- append(friends.gender, myself$gender)
							  V(friendship.graph)$location <- append(friends.location.name, myself$location$name)
							  V(friendship.graph)$hometown <- append(friends.hometown.name, myself$hometown$name)
							  V(friendship.graph)$Label <- V(friendship.graph)$name
							  V(friendship.graph)$kind <- "friend"
							  return(friendship.graph)
							}

					</script>
				</section>					
				<section>
					<h2>Gephi</h2>
					<p>
						Gephi, an open source graph visualization and manipulation software
					</p>
					<p>
						<img style="background:None;border:None;box-shadow:None" src="img/gephi.jpg">
					</p>					
				</section>	
				<section>
					<h2>Learn More About Gephi</h2>
					<p>
						https://www.udemy.com/gephi/
					</p>					
				</section>					
				<section data-markdown>
					<script type="text/template">
						## Get Likes Count of Posts
							require(plyr)
							posts <- fb_connect(path="me/posts", access_token=access_token, options=list("fields"="likes.fields(name)"))
							post.likes <- sapply(posts$data, function(x) x$likes)
							post.likes.data <- sapply(post.likes, function(x) x$data)
							li = list()
							for (i in 1:length(post.likes.data)){
							  for (j in 1:(length(post.likes.data[[i]])-1)){
								li <- append(li, post.likes.data[[i]][[j]]$name)
							  }
							}
							df = do.call(rbind.data.frame, li)
							colnames(df) <- c("name")
							ddply(df, .(name), summarize, NumSubs = length(name))
					</script>
				</section>	
				<section>
					<h2>Your Turn</h2>
						<ul>
							<li>Popular Checkins</li>
							<li>Common Interest</li>
							<li>Female/Male Distribution</li>
							<li>Photos Being Liked</li>
							<li>Asociation Rule of Friends</li>
						</ul>					
				</section>	
				
				<section>
					<h1>THANK YOU</h1>
					<img style="background:None;margin:-30px 0px 0px 0px;border:None;box-shadow:None" src="img/logo2.png">					
				</section>				
				<!--section>
					<h2>R Package Comparison</h2>
					<ol>
						<li><a href="http://cran.r-project.org/web/views">Cran Task View</a></li>
						<li><a href="http://crantastic.org/">crantastic</a></li>
						<li><a href="http://www.rseek.org/">rseek</a></li>
					</ol>
				</section>
				
				<section>
					<h2>R Package Search</h2>
					<ol>
						<li>help.search() or ??</li>
						<li>sos - findFn</li>
						<li>RSiteSearch() - search R site search</li>
						<li>Rseek.org</li>
					</ol>
				</section>
				
				<section data-markdown>
					<script type="text/template">
						## Cran Task View
							install.packages("ctv")
							library("ctv")
							install.views("MachineLearning")
					</script>
				</section>	

				<section>
					<h2>SVM Comparison</h2>

					<img src="img/classfication_3.png">
					<blockquote>
						Karatzoglou, A., Meyer, D., & Hornik, K. (2005). Support vector machines in R.
					</blockquote>
				</section>
				<section>
					<h2>FB Friend List</h2>

					<img src="img/fbgood0.png">

				</section>
				<section>
					<h2>FB Friend Counts</h2>

					<img src="img/fbgood1.png">

				</section>
				<section>
					<h2>FB Post Likes</h2>

					<img src="img/fbgood2.png">

				</section-->				
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
